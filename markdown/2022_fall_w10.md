---
Title: 2022 Fall 課程 w10
Date: 2022-11-12 11:00
Category: cad2022
Tags: w10, cad2022, cp2022
Slug: 2022_fall_courses_w10
Author: mdecycu
---

2022 Fall 課程進入第十週, 各班每六名學員自選組員分組, 目的除了鼓勵同儕間的互相學習外, 也希望每週各組依照 TCExam 題組的 XML 檔案格式出題.

<!-- PELICAN_END_SUMMARY -->

XML 格式檔案
----

在第十週的課程中, 無論是 TCExam 線上考試題庫的格式或是 CoppeliaSim 文字檔案格式, 都可以使用 XML 格式檔案表示.

XML 格式檔案就是利用標註 (tags) 涵蓋特定區域範圍的資料, 表示該段範圍資料的屬性. 超文件檔案就是典型的一種 XML 檔案.

希望處理 XML 檔案, 必須先取得該檔案所使用的 tags, 以下程式就可以取出某一 XML 檔案中的 tags:

<pre class="brush: python">
# from https://stackoverflow.com/questions/29596584/getting-a-list-of-xml-tags-in-file-using-xml-etree-elementtree
import xml.etree.ElementTree as ET
# load and parse the file
filename = 'two_link_slvs_shaft_simple.simscene.xml'
xmlTree = ET.parse(filename)
 
elemList = []
 
for elem in xmlTree.iter():
    elemList.append(elem.tag)
 
# now I remove duplicities - by convertion to set and back to list
elemList = list(set(elemList))
 
# Just printing out the result
print(elemList)
 
for i in elemList:
    print(i)
</pre>

TCExam 考試題目輸出後的 XML, 其主要 Tags 大約只有 20 個, 但 CoppeliaSim 完整的 XML 場景存檔後的 XML tags 則超過 340 個. 在這裡我們要使用 Leo Editor 來處理這些 XML 檔案.

Leo Editor 有一個 @settings 的設計, 其中除了利用 @data qt-gui-plugin-style-sheet 來設定套件畫面各部分字型的大小與顏色外, 也提供專用於 XML import 的解讀設定, 其設定名稱為 @data import-xml-tags, 以條列式逐一列出希望由 Leo Editor import 流程解讀的 tags 名稱, 然後放在 @settings 節點之下, 且對應的 .leo 必須先行存檔然後再開啟, 此一用來 parse XML tags 的設定才會生效.

因此利用 Leo Editor 處理 XML 的流程就是先使用上述程式讀取希望解讀的 .xml 檔案, 然後將取出的 tags 放入 @settings 節點下的 @data import-xml-tags 節點內文, 將 .leo 存檔後打開, 以 File import 讀入 .xml 檔案, 就可以得到利用 @auto 解讀後的 .xml 內容.
